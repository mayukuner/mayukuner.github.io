---
layout: post
title: Finger Search与启发式合并
---

n个元素（分别属于n个不相交的集合），使用二叉搜索树进行维护，进行n-1次合并，每次将两个集合合并。当使用的数据结构段为线段树时，整个过程的时间复杂度是$$O(n\log{n})$$的。然而，软萌教会了我使用Splay而不只是线段树（毕竟Splay支持的操作更多）来进行这n-1次启发式合并，且复杂度仍然保持为$$O(\log{n})$$的方法。

首先，使用Splay启发式合并的复杂度为$$O(n\log{n}f(a))$$，其中$$f(a)$$为一个Splay中的每个元素插入到另一个Splay中的均摊复杂度。显然，$$f(a)\in O(\log{n})$$。然而有一个小trick可以使$$f(a)=O(1)$$。

这个小trick即是：把树1（元素个数为n）合并到树2（元素个数为m），我们将树1中的元素按照树1中序遍历的顺序一一插入到树2中，且每次插入后都要Splay。

为啥能这样做呢？以后再补。<s>因为我也不会</s>
